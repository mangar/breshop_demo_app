
<script type="text/javascript" src="/javascripts/json2.js"></script>
<script type="text/javascript" src="/javascripts/validation.js"></script>
<script type="text/javascript" src="/javascripts/checkout.js"></script>
<%= javascript_include_tag  :defaults %>

<center>
	<h2>Checkout PAGSEGURO</h2>
</center>



<table width="80%" border="1">
	<tr>
		<td align="center">Descricao do Item</td>
		<td align="center">Quantidade</td>
		<td align="center">Valor <br>Unitario</td>
		<td align="center">Peso <br> Unitario</td>
		<td align="center">Peso <br> Total</td>
		<td align="center">Valor Total</td>
	</tr>
	<% @pedido.itens.values.each do |item|%>	
	<tr>
		<td align="center"><%= item.descricao%></td>
		<td align="center"><%= text_field_tag "quantity_#{item.codigo}", "#{item.quantidade.to_i}", :size => "3", :maxlength => "3", :onkeypress => "mascara(this, soNumeros)" %></td>
		<td align="center"><%= number_to_currency(item.valor, :separator => ",", :delimiter => ".", :unit => "R$ ")%></td>
		<td align="center"><%= format_weight(item.peso)%></td>
		<td align="center"><%= format_weight(item.peso_total)%></td>
		<td align="center"><%= number_to_currency(item.valor_total, :separator => ",", :delimiter => ".", :unit => "R$ ")%></td>
	</tr>
	<% end %>
	
	<tr>
		<td align="right">Calculo do Frete:		</td>
		<td colspan="4">
			Forma de entrega:
			<%= radio_button_tag "shipment_way", "EN", "" %>PAC
			<%= radio_button_tag "shipment_way", "SD", "" %>SEDEX &nbsp;&nbsp;
			<%= text_field_tag :zip1, "", :size => "5", :maxlength => "5", :onkeypress => "mascara(this, soNumeros)" %>
			<%= text_field_tag :zip2, "", :size => "3", :maxlength => "3", :onkeypress => "mascara(this, soNumeros)" %>			
		  	<%= link_to_remote ("Calcular",
		    	:url => { :action => :valor_frete }, 
				:with => "'value='+$('zip1').value+'+'+$('zip2').value+'+'+$('shipment_way_sd').checked+'+'+$('shipment_way_en').checked", 
				:complete => "atualiza_frete()",
				:update => "jstemp" ) %>
				</td>
		<td align="center">			
			<div id="valor_frete">&nbsp;
			<%= number_to_currency(@pedido.frete, :separator => ",", :delimiter => ".", :unit => "R$ ")%></div>
		</td>
	</tr>
	<tr>
		<td colspan="4" align="right">
			<div style="visibility:hidden" id="jstemp">&nbsp;</div>
		</td>
		<td align="center">
			Peso Total <br />
			<%= format_weight(@pedido.peso)%>
		</td>
		<td align="center">
			Pre√ßo Total <br />
			<div id="valor_pedido"><%= number_to_currency(@pedido.valor, :separator => ",", :delimiter => ".", :unit => "R$ ")%></div>
		</td>		
	</tr>
	<tr>
		<td colspan="6" align="right">
			| <%= link_to "Atualizar Itens", :action => 'atualizar'%>
			| <%= link_to "Iniciar carrinho de compras", :action => 'reiniciar'%>
			| <%= link_to "Fechar pedido", :action => 'atualizar'%>
		</td>
	</tr>	
</table>

<ul>
	<li><s>Formatar os numeros do checkout</s>
	<li><s>Inclusao de peso total e valor total do pedido</s>		
	<li><s>Calculo do frete (chamar a API)</s>
	<li>Teste com descricao do nome do produto com espacos
	<li>Incluir botoes e direciona-los aos metodos do controller		
	<li>Formulario de cadastro do cliente
	<li>criar testes fucnionais para as acoes dos botoes
	<li><s>Testes para o calculo de frete</s>
	<li>Criar documento de como instalar o plugin
	<li>Criar documento de como utilizar o eshop_demo_app
	<li>Colocar o codigo do plugin no github
	<li>Colocar o codigo do eshop_demo_app no github
</ul>


